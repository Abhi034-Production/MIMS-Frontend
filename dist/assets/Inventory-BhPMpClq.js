import{r as l,A as k,a as p,j as e,L as j,S as N,b as v,M as P,h as E,i as S,y as m}from"./index-Ct45hBRj.js";const C=()=>{const{user:x}=l.useContext(k),[c,u]=l.useState([]),[a,o]=l.useState({name:"",quantity:"",price:"",email:""}),[s,d]=l.useState(null),[r,y]=l.useState("");l.useEffect(()=>{r&&p.get(`https://mims-backend-x0i3.onrender.com/products?email=${encodeURIComponent(r)}`).then(t=>u(t.data)).catch(t=>console.error("Error fetching products:",t))},[r]),l.useEffect(()=>{x&&x.email&&fetch(`https://mims-backend-x0i3.onrender.com/business-profile/${x.email}`).then(t=>t.json()).then(t=>{t.status==="success"&&t.profile&&t.profile.businessEmail&&(y(t.profile.businessEmail),o(n=>({...n,email:t.profile.businessEmail})))})},[x]);const b=t=>{if(t.preventDefault(),a.name&&a.quantity&&a.price&&r){const n={...a,email:r};p.post("https://mims-backend-x0i3.onrender.com/add-product",n).then(i=>{u([...c,i.data]),o({name:"",quantity:"",price:"",email:r})}).catch(i=>console.error("Error adding product:",i)),m.success("Product Added Successfully..!")}else m.error("Please Fill All The Fields..!")},g=t=>{p.delete(`https://mims-backend-x0i3.onrender.com/delete-product/${t}`).then(()=>{u(c.filter(n=>n._id!==t))}).catch(n=>console.error("Error deleting product:",n)),m.warning("Deleted Product..!")},w=t=>{d(t)},f=t=>{if(t.preventDefault(),s.name&&s.quantity&&s.price&&r){const n={...s,email:r};p.put(`https://mims-backend-x0i3.onrender.com/update-product/${s._id}`,n).then(i=>{u(c.map(h=>h._id===s._id?i.data:h)),d(null)}).catch(i=>console.error("Error updating product:",i)),m.success("Successful Updating Product..!")}else m.error("Please fill all the fields")};return e.jsxs(j,{children:[e.jsx(N,{title:"Inventory | easyinventory",description:"Manage your inventory with ease on easyinventory. Add, edit, and delete products, update stock, and keep track of pricing.",keywords:"inventory, product management, stock tracking, inventory system, easyinventory",url:"https://easyinventory.online/inventory"}),e.jsx("div",{className:"text-sm text-gray-600 mb-4 dark:text-white",children:e.jsxs("nav",{className:"flex items-center space-x-2 dark:text-white",children:[e.jsx("span",{className:"text-gray-500 dark:text-white",children:e.jsx(v,{to:"/home",className:"dark:text-white",children:e.jsx(P,{fontSize:20})})}),e.jsx("span",{className:"text-gray-400 dark:text-white",children:"/"}),e.jsx("span",{className:"font-semibold dark:text-white text-gray-800 ",children:"Inventory"})]})}),e.jsxs("div",{className:"dark:text-white p-4 md:p-6 bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors",children:[e.jsxs("form",{onSubmit:s?f:b,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md mb-6 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{className:"dark:text-white block text-sm font-medium text-gray-600 mb-1",children:"Product Name:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Product Name",value:s?s.name:a.name,onChange:t=>s?d({...s,name:t.target.value}):o({...a,name:t.target.value}),className:"w-full border border-gray-300 rounded-md p-2 capitalize focus:outline-blue-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white ",required:!0}),e.jsx("input",{type:"hidden",name:"email",value:r,readOnly:!0})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"dark:text-white block text-sm font-medium text-gray-600 mb-1",children:"Quantity:"}),e.jsx("input",{type:"number",placeholder:"Qty",value:s?s.quantity:a.quantity,onChange:t=>s?d({...s,quantity:parseInt(t.target.value)}):o({...a,quantity:t.target.value}),className:"w-full border border-gray-300 rounded-md p-2 focus:outline-blue-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white text-xs",required:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"dark:text-white block text-sm font-medium text-gray-600 mb-1",children:"Price:"}),e.jsx("input",{type:"number",placeholder:"Price",value:s?s.price:a.price,onChange:t=>s?d({...s,price:parseFloat(t.target.value)}):o({...a,price:t.target.value}),className:"w-full border border-gray-300 rounded-md p-2 focus:outline-blue-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white text-xs",required:!0})]})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4",children:[e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition",children:s?"Save":"Add Product"}),s&&e.jsx("button",{type:"button",onClick:()=>d(null),className:"bg-gray-500 text-white px-6 py-2 rounded-md hover:bg-gray-600 transition",children:"Cancel"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-2 mb-6 sm:p-0 transition-colors",children:c.length===0?e.jsx(e.Fragment,{children:e.jsx(E,{})}):e.jsxs("table",{className:"w-full text-center text-[10px] xs:text-xs sm:text-sm md:text-base table-fixed break-words",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 dark:text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-1 py-2 sm:px-2 sm:py-4 dark:text-white whitespace-normal",children:"Product Name"}),e.jsx("th",{className:"px-1 py-2 sm:px-2 dark:text-white whitespace-normal",children:"Price"}),e.jsx("th",{className:"px-1 py-2 sm:px-2 dark:text-white whitespace-normal",children:"Qty"}),e.jsx("th",{className:"px-1 py-2 sm:px-2 dark:text-white whitespace-normal",children:"Stocks"}),e.jsx("th",{className:"px-1 py-2 sm:px-2 dark:text-white whitespace-normal",children:"Actions"})]})}),e.jsx("tbody",{className:"dark:text-white",children:c.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-1 px-1 sm:px-2 capitalize whitespace-normal break-words",children:t.name}),e.jsxs("td",{className:"py-1 px-1 sm:px-2 text-blue-600 font-semibold whitespace-normal break-words",children:["â‚¹ ",t.price.toFixed(2)]}),e.jsx("td",{className:"py-1 px-1 sm:px-2 whitespace-normal break-words",children:t.quantity}),e.jsx("td",{className:"py-1 px-1 sm:px-2 font-semibold whitespace-normal break-words",children:t.quantity===0?e.jsx("span",{className:"text-red-500",children:"Out of Stock"}):e.jsx("span",{className:"text-green-500",children:"Available"})}),e.jsx("td",{className:"py-1 px-1 sm:px-2 whitespace-normal break-words",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>w(t),className:"bg-yellow-400 hover:bg-yellow-500 text-white px-2 sm:px-4 py-1 rounded text-xs sm:text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>g(t._id),className:"bg-red-500 hover:bg-red-600 text-white px-2 sm:px-4 py-1 rounded text-xs sm:text-sm",children:"Delete"})]})})]},t._id))})]})}),e.jsx(S,{})]})]})};export{C as default};
